<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exam Simulator</title>
  <link rel="stylesheet" href="styles.css?v=20260211b" />
</head>
<body>
  <a class="dwf-badge" href="#" aria-label="DWF">
    <img src="DWF_LLP_Logo.svg" alt="DWF logo" />
  </a>

  <header class="topbar">
    <div class="topLeft" aria-hidden="true"></div>
    <div class="topCenter">
      <div class="topBannerTag"><span class="topBannerLogo" aria-label="DWF">dwf</span><span class="topBannerText">Data Protection Extend &amp; Accelerate</span></div>
      <div class="topNavButtons">
      <button id="homeTabBtn" class="secondary smallBtn" type="button">Exam Simulator</button>
      <button id="leaderboardTabBtn" class="secondary smallBtn" type="button">Leaderboard</button>
      </div>
    </div>
    <div class="meta" aria-hidden="true"></div>
  </header>

  <main class="container">
    <section id="home" class="card">
      <h1>Practice exam - CIPP/E</h1>
      <p class="muted">
        Questions are randomly drawn from both exam files. Your answers stay in this browser only.
      </p>

      <section class="settingsGrid">
      <div class="fieldRow">
        <label class="fieldLabel" for="quizSourceLegacy">Question source</label>
        <div class="fieldControl">
          <div class="sourceHeaderRow">
          <div class="sourceToggle" role="radiogroup" aria-label="Question source">
            <label class="radioPill">
              <input id="quizSourceLegacy" type="radio" name="quizSource" value="legacy" checked />
              Legacy
            </label>
            <label class="radioPill">
              <input id="quizSourceAi" type="radio" name="quizSource" value="ai" />
              AI
            </label>
            <label class="radioPill">
              <input id="quizSourceMixed" type="radio" name="quizSource" value="mixed" />
              Mixed (50/50)
            </label>
          </div>
          <span class="muted small" id="questionBankInfo">Loading question bank…</span>
          </div>
          <span class="muted small" id="quizSourceHelp"></span>
        </div>
      </div>

      <div class="fieldRow">
        <label class="fieldLabel" for="questionCount">Number of questions</label>
        <div class="fieldControl">
          <input id="questionCount" type="number" min="1" step="1" value="90" />
          <span class="muted small" id="questionCountHelp"></span>
        </div>
      </div>

      <div class="fieldRow">
        <label class="fieldLabel" for="timerEnabled">Timer</label>
        <div class="fieldControl">
          <label class="checkbox">
            <input id="timerEnabled" type="checkbox" checked />
            Enable timer
          </label>
          <input id="timerMinutes" type="number" min="1" step="1" value="150" />
          <span class="muted small">minutes</span>
          <span class="muted small" id="timerSummary"></span>
        </div>
      </div>

      </section>

      <div class="controls startRow">
        <button id="startBtn" class="primary" disabled>Start exam</button>
        <button id="resumeBtn" class="secondary" style="display:none;">Resume last attempt</button>
        <button id="resetBtn" class="danger" style="display:none;">Reset</button>
      </div>
    </section>

    <section id="exam" class="card" style="display:none;">
      <div class="examHeader">
        <div>
          <div class="muted small">Attempt</div>
          <div id="attemptInfo" class="mono"></div>
          <div id="timerInfo" class="muted small mono"></div>
        </div>
        <div class="examActions">
          <button id="saveExitBtn" class="secondary">Save & exit</button>
          <button id="submitBtn" class="primary">Submit</button>
        </div>
      </div>

      <div id="jumpBar" class="jumpBar"></div>

      <article id="questionCard" class="questionCard"></article>

      <div class="navRow">
        <button id="prevBtn" class="secondary">Previous</button>
        <div class="muted small" id="progressText"></div>
        <button id="nextBtn" class="secondary">Next</button>
      </div>
    </section>

    <section id="leaderboardTab" class="card" style="display:none;">
      <div class="resultsHeader">
        <h2>Leaderboard</h2>
        <div class="controls">
          <button id="leaderboardBackBtn" class="secondary">Back to home</button>
        </div>
      </div>
      <p id="globalLeaderboardNotice" class="muted small"></p>

      <h3>Global leaderboard</h3>
      <div id="globalLeaderboardList" class="leaderboardList muted small">Loading…</div>

      <h3>Local fallback leaderboard</h3>
      <div id="leaderboardList" class="leaderboardList muted small">No entries yet.</div>
    </section>

    <section id="results" class="card" style="display:none;">
      <div class="resultsHeader">
        <h2>Results</h2>
        <div class="controls">
          <button id="newAttemptBtn" class="primary">New attempt</button>
          <button id="backHomeBtn" class="secondary">Back to home</button>
        </div>
      </div>

      <p id="scoreLine" class="scoreLine"></p>
      <div class="fieldRow">
        <label class="fieldLabel" for="resultsName">Name</label>
        <div class="fieldControl">
          <input id="resultsName" type="text" maxlength="30" placeholder="Your name for the global leaderboard" />
          <div class="controls">
            <button id="saveResultBtn" class="secondary" type="button">Save result</button>
          </div>
          <span id="saveResultMessage" class="muted small"></span>
        </div>
      </div>

      <h3>Global leaderboard</h3>
      <div id="resultsGlobalLeaderboardList" class="leaderboardList muted small">Loading…</div>

      <div class="filters">
        <label class="checkbox">
          <input type="checkbox" id="showOnlyWrong" />
          Show only wrong / unanswered
        </label>
      </div>

      <div id="reviewList" class="reviewList"></div>
    </section>
  </main>

  <footer class="footer muted small">
    Tip: you can host this on GitHub Pages (static site). No Python required.
  </footer>
  <script src="src/leaderboard/supabaseLeaderboard.js"></script>
  <script src="app.js"></script>
</body>
</html>
